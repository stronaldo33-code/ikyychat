<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ikyChat</title>
<style>
body{margin:0;background:#343541;font-family:Arial;color:white;display:flex;flex-direction:column;height:100vh;}
.header{background:#202123;padding:15px;text-align:center;font-size:20px;font-weight:bold;}
.chat{flex:1;overflow-y:auto;padding:15px;display:flex;flex-direction:column;gap:10px;}
.msg{padding:10px;border-radius:8px;max-width:75%;}
.user{align-self:flex-end;background:#19c37d;color:black;}
.bot{align-self:flex-start;background:#444654;}
.input{display:flex;padding:10px;background:#40414f;}
input{flex:1;padding:10px;border-radius:6px;border:none;outline:none;}
button{margin-left:5px;padding:10px;border:none;border-radius:6px;background:#19c37d;font-weight:bold;}
</style>
</head>
<body>

<div class="header">ðŸ¤– ikyChat</div>
<div class="chat" id="chat"></div>

<div class="input">
<input id="text" placeholder="Tulis pesan..." />
<button onclick="send()">Kirim</button>
</div>

<script>
const chat=document.getElementById("chat");

function add(text,cls){
const d=document.createElement("div");
d.className="msg "+cls;
d.innerText=text;
chat.appendChild(d);
chat.scrollTop=chat.scrollHeight;
}

async function send(){
const input=document.getElementById("text");
const text=input.value;
if(!text)return;

add(text,"user");
input.value="";
add("Mengetik...","bot");

const res=await fetch("/api/chat",{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({message:text})
});

const data=await res.json();
chat.lastChild.remove();
add(data.reply,"bot");
}
</script>

</body>
</html>
